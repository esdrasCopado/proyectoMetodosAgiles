<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar</title>
    <link rel="stylesheet" href="estilos/loginStyle.css">
    <link rel="stylesheet" href="estilos/inputs.css">
    <link rel="stylesheet" href="estilos/mensageStyle.css">

    <script src="javaScript/validarInputs.js"></script>

    <script src="javaScript/alertMesage.js"></script>
    <script src="javaScript/direccionHost.js"></script>
    <script src="javaScript/RegistrarUsuario.js"></script>
</head>

<body >
    <div class="container">

        <div class="form-container">
            <div class="logo-container">
                <img src="imagenes/Sport_Logo-removebg.png" alt="">
            </div>
            <h1>
                <span>Registrarse</span>
            </h1>
            <form action="#">

                <div id="grupo_1" class="grupo_1">
                    <div class="input-user">
                        <input id="name" required="" type="text" name="nombre del usuario" autocomplete="off"
                            class="input" />
                        <label class="user-label">Nombre Completo</label>
                    </div>
                    <div id="error-name"></div>

                    <div id="emailElement" class="input-user">
                        <input id="email" required="" type="text" name="email-input" autocomplete="off" class="input" />
                        <label class="user-label">Correo electrónico</label>
                    </div>
                    <div id="errorEmail"></div>


                </div>


                <div id="grupo_2" class="grupo_2">
                    <div id="passwordElement" class="input-user">
                        <input id="password1" required="" type="password" name="password-input" autocomplete="off"
                            class="input" />
                        <label class="user-label">Contraseña</label>
                    </div>
                    <div id="errorContraseña"></div>

                    <div id="passwordElement2" class="input-user">
                        <input id="password2" required="" type="password" name="password-input" autocomplete="off"
                            class="input" />
                        <label class="user-label">Repetir Contraseña</label>
                    </div>
                    <div id="errorContraseña2"></div>
                </div>


                <button id="botonSiguiente" type="submit">Siguiente</button>

            </form>


        </div>
    </div>

    <div id="alert-container">
        <div class="overlay"></div>
        <div class="alertMesage">
        </div>
    </div>

    <script>
        let bloqueActual = 1; // 1 para el primer bloque, 2 para el segundo

        // Cambia el bloque de código para el evento de clic
        const siguiente = document.getElementById('botonSiguiente');
        siguiente.addEventListener('click', function (e) {
            e.preventDefault();

            // Limpiar errores
            limpiarErrores();

            // Definir variables del primer bloque fuera de los condicionales
            const name = document.getElementById('name');
            const email = document.getElementById('email');

            if (bloqueActual === 1) {
                // Variables del primer bloque
                const grupo1 = document.getElementById('grupo_1');
                const grupo2 = document.getElementById('grupo_2');

                // Valida el primer bloque
                if (validateName(name) && validateEmail(email)) {

                    // Cambia el bloque
                    grupo1.style.display = 'none';
                    grupo2.style.display = 'block';



                    // Llama a registroExitoso desde la instancia de Vue


                    bloqueActual = 2; // Cambiamos al bloque 2
                }
            } else if (bloqueActual === 2) {
                // Variables del segundo bloque
                const password1 = document.getElementById('password1');
                const password2 = document.getElementById('password2');

                // Valida el segundo bloque
                if (validatePassword(password1, password2)) {
                    registrarUsuario(name.value, email.value, password1.value);
                }
            }
        });





        function limpiarErrores() {
            document.getElementById('errorEmail').innerHTML = "";
            document.getElementById('errorContraseña').innerHTML = "";
        }

    </script>
</body>

</html>